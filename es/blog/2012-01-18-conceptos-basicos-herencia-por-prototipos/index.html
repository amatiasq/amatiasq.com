<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="dark">
    <meta name="theme-color" content="#121212">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <title>Conceptos B√°sicos Javascript: Herencia por prototipos | A. Mat√≠as Quezada</title>
    
<meta name="astro-view-transitions-enabled" content="true">
<meta name="astro-view-transitions-fallback" content="animate">
<script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.rasoniT7.js"></script>
  <link rel="stylesheet" href="/_astro/_slug_.eUhtq0iF.css">
<style>time:where(.astro-zcsldidg){font-family:ui-monospace,SF Mono,Menlo,Monaco,Courier New,monospace;font-size:.9em}
.md .code-block{position:relative;margin:1.5rem 0}.md pre{padding:1.25rem;border-radius:8px;overflow-x:auto;border:1px solid oklch(28% 0 0);margin:0}.md pre code{font-family:ui-monospace,SF Mono,Menlo,Monaco,Courier New,monospace;font-size:.875rem;line-height:1.6}.md :not(pre)>code{font-family:ui-monospace,SF Mono,Menlo,Monaco,Courier New,monospace;background:#090909;padding:.2em .4em;border-radius:4px;font-size:.9em;border:1px solid oklch(28% 0 0)}.md h2,.md h3{margin-top:2.5rem;margin-bottom:1rem}.md p{margin:1rem 0}.md blockquote{border-left:3px solid oklch(28% 0 0);margin:1.5rem 0;padding:.5rem 1rem;background:#090909;border-radius:0 8px 8px 0}.md blockquote p{margin:.5rem 0;color:#8f8f8f}.md ul,.md ol{padding-left:1.5rem;margin:1rem 0}.md li{margin:.5rem 0}.md hr{border:none;border-top:1px solid oklch(28% 0 0);margin:2rem 0}.md img{max-width:100%;height:auto;display:block;margin:1.5rem 0}.md pre span[style*="color:#6A737D"],.md pre span[style*="color:#8b949e"]{color:#54b05a!important;font-style:italic}.tags:where(.astro-hfj6urh3){list-style:none;padding:0;margin:1rem 0;display:flex;flex-wrap:wrap;gap:.5rem}li:where(.astro-hfj6urh3) .tag-link{background:#121212;border:1px solid oklch(28% 0 0);border-radius:4px;padding:.2rem .6rem;margin:0;font-size:.8rem;color:#9e9e9e;text-decoration:none;transition:all .15s ease;display:inline-block}li:where(.astro-hfj6urh3) .tag-link:hover{background:#222;border-color:var(--accent);color:var(--accent);transform:none}
@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0;mix-blend-mode:plus-lighter}to{opacity:1;mix-blend-mode:plus-lighter}}@keyframes astroFadeOut{0%{opacity:1;mix-blend-mode:plus-lighter}to{opacity:0;mix-blend-mode:plus-lighter}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style><style>[data-astro-transition-scope="astro-dsji2kxr-1"] { view-transition-name: title-2012-01-18-conceptos-basicos-herencia-por-prototipos; }@layer astro { ::view-transition-old(title-2012-01-18-conceptos-basicos-herencia-por-prototipos) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(title-2012-01-18-conceptos-basicos-herencia-por-prototipos) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(title-2012-01-18-conceptos-basicos-herencia-por-prototipos) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(title-2012-01-18-conceptos-basicos-herencia-por-prototipos) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-dsji2kxr-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-dsji2kxr-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-dsji2kxr-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-dsji2kxr-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-dsji2kxr-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-dsji2kxr-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-dsji2kxr-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-dsji2kxr-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-vpr6a7he-2"] { view-transition-name: tag-javascript; }@layer astro { ::view-transition-old(tag-javascript) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(tag-javascript) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(tag-javascript) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(tag-javascript) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-vpr6a7he-2"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-vpr6a7he-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-vpr6a7he-2"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-vpr6a7he-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-vpr6a7he-2"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-vpr6a7he-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-vpr6a7he-2"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-vpr6a7he-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head>
  <body>
    
  <header class="astro-np5jgbit">
  <a href="/es/" class="site-title astro-np5jgbit"><span class="a-matias-quezada astro-np5jgbit astro-2dpizvyk">
  <abbr class="astro-2dpizvyk">Adrian</abbr>
  <span class="dot astro-2dpizvyk">.</span>
  <span class="astro-2dpizvyk">Mat√≠as Quezada</span>
</span></a>
  <nav class="astro-np5jgbit">
    <a href="/es/projects/" class="astro-np5jgbit">Projects</a>
    <span class="sep astro-np5jgbit">¬∑</span>
    <a href="/es/blog/" class="astro-np5jgbit">Blog</a>
    <span class="sep astro-np5jgbit">¬∑</span>
    <a href="/es/experiments/" class="astro-np5jgbit">Experiments</a>
    <span class="sep astro-np5jgbit">¬∑</span>
    <a href="/es/talks/" class="astro-np5jgbit">Talks</a>
    <span class="sep astro-np5jgbit">¬∑</span>
    <a href="/es/career/" class="astro-np5jgbit">Career</a>
    <span class="sep astro-np5jgbit">|</span>
    <a href="https://github.com/amatiasq" title="GitHub" class="icon-link astro-np5jgbit">
      <svg aria-label="GitHub" width="20" height="20" viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg" class="astro-np5jgbit">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="currentColor" class="astro-np5jgbit"></path>
      </svg>
    </a>
    <a href="/en/blog/2012-01-18-conceptos-basicos-herencia-por-prototipos/" title="English" class="lang-switch astro-bzi5jpwk" data-lang="en">
  üá¨üáß
</a>



<script type="module">function n(){const t=document.querySelector(".lang-switch");if(!t)return;const a=t.dataset.lang,e=Intl.DateTimeFormat().resolvedOptions().timeZone.startsWith("America/");a==="en"?(t.textContent=e?"üá∫üá∏":"üá¨üáß",t.title="English"):(t.textContent=e?"üá¶üá∑":"üá™üá∏",t.title="Espa√±ol")}n();document.addEventListener("astro:after-swap",n);</script>
  </nav>
</header>
<hr class="astro-np5jgbit">
  <main>
    <article>
      <header>
        <h1 data-astro-transition-scope="astro-dsji2kxr-1">Conceptos B√°sicos Javascript: Herencia por prototipos</h1>
        <time datetime="2012-01-18T00:00:00.000Z" class="astro-zcsldidg">18 ene 2012</time>
        <ul class="tags astro-hfj6urh3">
    <li class="astro-hfj6urh3">
        <a href="/es/tag/javascript/" class="tag-link astro-hfj6urh3">
          <span class="astro-hfj6urh3" data-astro-transition-scope="astro-vpr6a7he-2">
            Javascript
          </span>
        </a>
      </li>
  </ul>


      </header>
      <div class="md "><p>Lleg√≥ la hora de entrar el en tema que realmente confunde a los reci√©n llegados a Javascript, principalmente para quienes vienen de lenguajes que implementan la orientaci√≥n a objetos mediante clases, que son la gran mayor√≠a.</p>
<!-- end extract -->

<h3>Orientaci√≥n a Objetos</h3>
<p>Primero deberemos aclarar que significa Programaci√≥n Orientada a Objetos (POO u OOP en ing√©s).</p>
<p><a href="https://es.wikipedia.org/wiki/Programaci%C3%B3n_orientada_a_objetos">Seg√∫n la Wikipedia</a>, la descripci√≥n es:</p>
<blockquote>
<p>es un paradigma de programaci√≥n que usa objetos y sus interacciones, para dise√±ar aplicaciones y programas inform√°ticos. Est√° basado en varias t√©cnicas, incluyendo herencia, abstracci√≥n, polimorfismo y encapsulamiento.</p>
</blockquote>
<p>Como vemos un lenguaje orientado a objetos <strong>no necesariamente tiene que implementarse mediante clases</strong>, cualquier sistema que proporcione <a href="https://es.wikipedia.org/wiki/Herencia_(programaci%C3%B3n_orientada_a_objetos)">herencia</a>, <a href="https://es.wikipedia.org/wiki/Abstracci%C3%B3n_(programaci%C3%B3n_orientada_a_objetos)">abstracci√≥n</a>, <a href="https://es.wikipedia.org/wiki/Polimorfismo_(programaci%C3%B3n_orientada_a_objetos)">polimorfismo</a>¬†y <a href="https://es.wikipedia.org/wiki/Encapsulamiento_(programaci%C3%B3n_orientada_a_objetos)">encapsulamiento</a>¬†es una implementaci√≥n de orientaci√≥n a objetos v√°lida. Como ya dijimos, el sistema de clases es el m√°s extendido, utilizado por C++, Java, C#, PHP, Python, ActionScript3, Perl, Objective-C, Ruby, etc... <strong>Javascript no tiene clases, utiliza el sistema de herencia por prototipos</strong>, veamos la diferencia:</p>
<!--more Seguir leyendo ‚Üí -->

<p><strong>En un lenguaje basado en clases</strong> tenemos dos tipos de conceptos, los objetos en s√≠, referencias que pueden ser almacenadas, modificadas y pasadas como argumentos. Y por otro lado <strong>las clases, objetos intangibles, no podemos guardarlos en variables ni pasar como argumento</strong>, no podemos manipularlos ni comprobar si existen excepto por reflexi√≥n, que consiste en herramientas del lenguaje para obtener objetos (tangibles, del tipo anterior) que <strong>representan a las clases</strong> a las que no podemos acceder. En un lenguaje de √©ste tipo las clases est√°n una capa por encima de los objetos y definen la herencia, abstracci√≥n, encapsulamiento y polimorfismo de los objetos que se obtendr√°n a partir de ellas, tienen una funci√≥n de plantillas para crear objetos definidas antes de ejecutarse el c√≥digo del programa.</p>
<p><strong>En un lenguaje orientado a prototipos</strong> no hay clases que definan la herencia, los objetos mismos heredan de otros objetos. No hay clases cuando el programa se inicia, sino que se crean objetos y se le ordena a otros objetos que hereden de ellos. Por ejemplo, si tenemos un objeto eventEmitter y queremos crear instancias creamos nuevos objetos y hacemos que hereden de eventEmitter.</p>
<h3>[[Prototype]]</h3>
<p>Una vez entendido el concepto podemos pasar a la pr√°ctica, sabemos que para crear instancias de clases hacemos <code>new MyClass()</code> pero c√≥mo hacemos que objetos hereden de objetos? Aqu√≠ entran los prototipos. <strong>Todos los objetos Javascript tienen una propiedad oculta que llamaremos <code>[[Prototype]]</code></strong>, con corchetes (aunque en algunos navegadores es posible acceder a ella mediante la propiedad <code>.__proto__</code>, con dos barras bajas a cada lado, pero no es est√°ndar) <strong>que es un puntero al objeto del cual hereda</strong>. Y que significa que hereda? Podr√≠amos resumir la herencia en que un objeto tiene las mismas propiedades que otro.</p>
<p>Con √©sto nos ahorramos tener que poner las mismas propiedades en m√°s de un objeto. Esto trae un nuevo concepto que puede confundir a muchos: <strong>en Javascript todo es una instancia, y cuando heredamos de un objeto tambi√©n se puede decir que estamos creando una instancia de √©se objeto</strong>, para evitar confunsiones <strong>suele decirse que un objeto &quot;extiende&quot; otro</strong>. Imaginemos que tenemos un objeto perro que hereda de animal. Que significa √©sto? que la propiedad <code>[[Prototype]]</code> de perro es animal, o lo que es lo mismo:</p>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">perro.</span><span style="color:#79B8FF">__proto__</span><span style="color:#F97583"> ==</span><span style="color:#E1E4E8"> animal; </span><span style="color:#6A737D">// true</span></span></code></pre></div><p>El c√≥digo de ejemplo es el siguiente:</p>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> animal </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {};</span></span>
<span class="line"><span style="color:#E1E4E8">animal.</span><span style="color:#B392F0">estaVivo</span><span style="color:#F97583"> =</span><span style="color:#F97583"> function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> perro </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {};</span></span>
<span class="line"><span style="color:#E1E4E8">perro.</span><span style="color:#79B8FF">__proto__</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> animal;</span></span>
<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(perro.estaVivo);</span></span></code></pre></div><p><a href="http://jsfiddle.net/amatiasq/tyK4u/" target="_blank">Pru√©bame</a></p>
<p>Vemos que <code>perro.estaVivo</code> es la funci√≥n que asignamos a <code>animal</code> c√≥mo puede ser √©sto? Por la herencia por prototipos. <strong>Javascript ha buscado la propiedad <code>estaVivo</code> en <code>perro</code> pero no la ha encontrado, entonces accede a su propiedad <code>[[Prototype]]</code> (o <code>__proto__</code>)</strong> donde nosotros guardamos <code>animal</code>. Entonces busca <code>estaVivo</code> en <code>animal</code> y lo encuentra. Por eso <code>perro.estaVivo</code> nos devuelve el m√©todo de <code>animal</code>. Podr√≠amos representarlo as√≠:</p>
<p><img src="/wp-content/uploads/2012/01/prototype.png" alt="Diagrama"></p>
<p>Y si animal no hubiese tenido la propiedad <code>estaVivo</code>? En ese caso debemos tener en cuenta que animal tambi√©n es un objeto y que todos los objetos tienen prototipo, en caso de que no le asignemos ninguno su prototipo es <code>Object.prototype</code>. Es otra forma de decir que <strong>en Javascript todos los objetos extienden <code>Object.prototype</code></strong>. <code>Object.prototype</code> es el equivalente a la clase <code>Object</code> de Java o C#.</p>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> animal </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {};</span></span>
<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(animal.</span><span style="color:#79B8FF">__proto__</span><span style="color:#F97583"> ===</span><span style="color:#79B8FF"> Object</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">prototype</span><span style="color:#E1E4E8">);</span></span></code></pre></div><p><a href="http://jsfiddle.net/amatiasq/29S2r/" target="_blank">Pru√©bame</a></p>
<p>Y si tampoco encuentra la propiedad en <code>Object.prototype</code>? lo busca en el <code>[[Prototype]]</code> de <code>Object.prototype</code> pero sorpresa! <strong><code>Object.prototype.__proto__</code> es <code>null</code></strong>. Eso significa que <strong>es el √∫ltimo objeto de la jerarqu√≠a de herencia</strong>, si llegado a √©ste punto Javascript no encuentra la propiedad que le pedimos devuelve <code>undefined</code>.</p>
<p>Esta jerarqu√≠a de prototipos suele llamarse <strong>cadena de prototipos</strong> del objeto. Por ejemplo, <code>Object.prototype</code> tiene la propiedad <code>.toString()</code>, entonces si volvemos a crear <code>perro</code> heredando de <code>animal</code>, su propiedad <code>.toString()</code> que ser√°? Javascript recorrer√° la jerarqu√≠a de prototipos de <code>perro</code> hasta encontrar <code>.toString()</code> que est√° en <code>Object.prototype</code>.</p>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> animal </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {};</span></span>
<span class="line"><span style="color:#E1E4E8">animal.</span><span style="color:#B392F0">estaVivo</span><span style="color:#F97583"> =</span><span style="color:#F97583"> function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> perro </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {};</span></span>
<span class="line"><span style="color:#E1E4E8">perro.</span><span style="color:#79B8FF">__proto__</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> animal;</span></span>
<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(perro.toString </span><span style="color:#F97583">===</span><span style="color:#79B8FF"> Object</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">prototype</span><span style="color:#E1E4E8">.toString);</span></span></code></pre></div><p><a href="http://jsfiddle.net/amatiasq/4rVg4/" target="_blank">Pru√©bame</a></p>
<h3>Como modificar una propidad inaccesible?</h3>
<p>Bien, la teor√≠a ha ido correctamente, pero como ya dijimos, <strong><code>__proto__</code> no es est√°ndar</strong>, y por lo tanto no podemos contar con que funcione en cualquier motor de Javascript, <strong>entonces c√≥mo se supone que vamos a implementar herencia en Javascript?</strong> Para ello Javascript provee de una funcionalidad un tanto dif√≠cil de entender as√≠ que intentaremos ir poco a poco.</p>
<p><strong>Toda funci√≥n, creada en Javascript tiene una propiedad llamada <code>.prototype</code> que no debe confundirse con <code>[[Prototype]]</code></strong>, el <code>[[Prototype]]</code> de las funciones apunta a <code>Function.prototype</code> que es un objeto que tiene funciones como <code>.call()</code>, <code>.apply()</code> y <code>.bind()</code>. No, en √©ste caso nos referimos a que todas las funciones tienen una propiedad llamada <code>prototype</code> que es un objeto vac√≠o. Y porqu√© se llama <code>prototype</code> si no tiene nada que ver con el <code>[[Prototype]]</code> de la funci√≥n? <strong>Porque los objetos que creemos llamando a √©sa funci√≥n con <code>new</code> tendr√°n su <code>[[Prototype]]</code> apuntando a la propiedad <code>prototype</code> de la funci√≥n:</strong></p>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> myFunct</span><span style="color:#E1E4E8">() {}</span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> obj </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> myFunct</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(obj.</span><span style="color:#79B8FF">__proto__</span><span style="color:#F97583"> ===</span><span style="color:#79B8FF"> myFunct</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">prototype</span><span style="color:#E1E4E8">);</span></span></code></pre></div><p><a href="http://jsfiddle.net/amatiasq/r2F8G/" target="_blank">Pru√©bame</a></p>
<p>Sorpresa! <strong>Hemos modificado la propiedad oculta <code>[[Prototype]]</code> de <code>obj</code>!</strong> Quiz√°s te preguntes porqu√© no se estandariza la propiedad accesible <code>__proto__</code>? Porque con el sistema de las funciones el lenguaje se asegura que <strong>s√≥lo podemos modificar la propiedad <code>[[Prototype]]</code> de objetos nuevos</strong>, no de existentes. De √©sta forma, en las implementaciones est√°ndar donde no podemos acceder a la propiedad <code>__proto__</code> no podemos modificar el prototipo de una funci√≥n o de <code>Object.prototype</code> ni podemos evitar que un objeto extienda de <code>Object.prototype</code>, poniendo su propiedad <code>__proto__</code> a <code>null</code> romper√≠amos √©sta regla del lenguaje.</p>
<p>Pero <strong>entonces <code>myFunct</code> es una clase? Podr√≠a decirse que si, pero no es una clase como las que estamos acostumbrados a ver, es una funci√≥n, es un objeto y es tangible</strong>, el hecho de crear nuevos objetos con <code>new</code> seguido de una funci√≥n es solo una sintaxis que se a√±adi√≥ a Javascript para parecerse a Java, lenguaje en plena expansi√≥n cuando Javascript fue dise√±ado. Ahora que entendemos que <code>myFunct.prototype</code> es igual al <code>[[Prototype]]</code> de los objetos que creemos con la funci√≥n podemos crear objetos que extiendan del mismo objeto:</p>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> myFunct</span><span style="color:#E1E4E8">() {}</span></span>
<span class="line"><span style="color:#79B8FF">myFunct</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">prototype</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  name: </span><span style="color:#9ECBFF">'Alice'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  lastname: </span><span style="color:#9ECBFF">'Smith'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#B392F0">  fullname</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.name </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ' '</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.lastname;</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> instancia1 </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> myFunct</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> instancia2 </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> myFunct</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(instancia1.</span><span style="color:#B392F0">fullname</span><span style="color:#E1E4E8">() </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> 'n'</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> instancia2.</span><span style="color:#B392F0">fullname</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(instancia1.</span><span style="color:#79B8FF">__proto__</span><span style="color:#F97583"> ==</span><span style="color:#E1E4E8"> instancia2.</span><span style="color:#79B8FF">__proto__</span><span style="color:#E1E4E8">);</span></span></code></pre></div><p><a href="http://jsfiddle.net/amatiasq/F2yQy/" target="_blank">Pru√©bame</a></p>
<p>E incluso podemos crear un objeto que extienda de una instancia de myFunct!</p>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">instancia1.name </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> 'Bob'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> extenderInstancia1</span><span style="color:#E1E4E8">() {}</span></span>
<span class="line"><span style="color:#79B8FF">extenderInstancia1</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">prototype</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> instancia1;</span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> subInstancia </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> extenderInstancia1</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> texto </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> 'Fullname: '</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> subInstancia.</span><span style="color:#B392F0">fullname</span><span style="color:#E1E4E8">() </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> 'n'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">texto </span><span style="color:#F97583">+=</span><span style="color:#9ECBFF"> 'Es instancia de extenderInstancia1? '</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> (subInstancia </span><span style="color:#F97583">instanceof</span><span style="color:#B392F0"> extenderInstancia1</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> 'n'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">texto </span><span style="color:#F97583">+=</span><span style="color:#9ECBFF"> 'Es instancia de myFunct? '</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> (subInstancia </span><span style="color:#F97583">instanceof</span><span style="color:#B392F0"> myFunct</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> 'n'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">texto </span><span style="color:#F97583">+=</span><span style="color:#9ECBFF"> 'Es instancia de Object? '</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> (subInstancia </span><span style="color:#F97583">instanceof</span><span style="color:#B392F0"> Object</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">alert</span><span style="color:#E1E4E8">(texto);</span></span></code></pre></div><p><a href="http://jsfiddle.net/amatiasq/Ggj6T/" target="_blank">Pru√©bame</a></p>
<h3><code>extend()</code></h3>
<p>Pero √©ste l√≠o de tener funciones que parecen clases pero no son clases exactamente y crean instancias y tener que crear funciones para extender es bastante confuso, por ello, los defensores de no mezclar la herencia por prototipos con √©stas falsas clases proponen usar la funci√≥n <code>extend</code>:</p>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> extend</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">proto</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  function</span><span style="color:#B392F0"> intermediario</span><span style="color:#E1E4E8">() {}</span></span>
<span class="line"><span style="color:#79B8FF">  intermediario</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">prototype</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> proto;</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> intermediario</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre></div><p>Y con √©sta funci√≥n podemos extender objetos sin necesidad de crear funciones intermedias:</p>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> base </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  name: </span><span style="color:#9ECBFF">'Alice'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  lastname: </span><span style="color:#9ECBFF">'Smith'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#B392F0">  fullname</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.name </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> ' '</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.lastname;</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> instancia1 </span><span style="color:#F97583">=</span><span style="color:#B392F0"> extend</span><span style="color:#E1E4E8">(base);</span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> instancia2 </span><span style="color:#F97583">=</span><span style="color:#B392F0"> extend</span><span style="color:#E1E4E8">(base);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">instancia1.name </span><span style="color:#F97583">=</span><span style="color:#9ECBFF"> 'Bob'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> subInstancia </span><span style="color:#F97583">=</span><span style="color:#B392F0"> extend</span><span style="color:#E1E4E8">(instancia1);</span></span>
<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(subInstancia.</span><span style="color:#B392F0">fullname</span><span style="color:#E1E4E8">());</span></span></code></pre></div><p><a href="http://jsfiddle.net/amatiasq/WZFAH/" target="_blank">Pru√©bame</a></p>
<p>Como vemos, el c√≥digo queda bastante m√°s claro, es por √©sto que en la 5¬™ edici√≥n de ECMAScript (el est√°ndar en el que est√° basado Javascript), se decidi√≥ a√±adir <code>Object.create()</code> que <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create">cumple la misma funcionalidad</a> que la funci√≥n <code>extend()</code> que hemos creado.</p>
<h3>Resumen</h3>
<p>Es un camino duro pasar de un lenguaje basado en clases a uno basado en prototipos, requiere mucha pr√°ctica, una mente abierta y muchas ganas de aprender. Pero las ganancias son grandes, incluso para desarrolladores que no necesiten tocar Javascript considero que aprender √©ste patr√≥n aporta ventajas porque <strong>entender ambos patrones en mente nos abre a nuevas ideas, nos ayuda a tener siempre presente que las cosas no tienen porque ser como estamos acostumbrados a que sean, y a buscar nuevas soluciones a nuevos problemas y por √∫ltimo pero no menos importante, nos mantiene activos</strong>. Espero que sea f√°cil seguir el post aunque se que ha crecido m√°s all√° de lo deseado, pido comprensi√≥n ya que escribir no es mi punto fuerte, pero para eso est√° la pr√°ctica, para mejorar ;)</p>
</div>
    </article>
  </main>

  </body></html>