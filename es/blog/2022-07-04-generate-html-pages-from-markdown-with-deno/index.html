<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="dark">
    <meta name="theme-color" content="#121212">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <title>Generar p√°ginas HTML desde TSX con Deno | A. Mat√≠as Quezada</title>
    
<meta name="astro-view-transitions-enabled" content="true">
<meta name="astro-view-transitions-fallback" content="animate">
<script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.rasoniT7.js"></script>
  <link rel="stylesheet" href="/_astro/_slug_.CP_IH4Z8.css">
<style>time:where(.astro-zcsldidg){font-family:ui-monospace,SF Mono,Menlo,Monaco,Courier New,monospace;font-size:.9em}
.md .code-block{position:relative;margin:1.5rem 0}.md pre{padding:1.25rem;border-radius:8px;overflow-x:auto;border:1px solid oklch(28% 0 0);margin:0}.md pre code{font-family:ui-monospace,SF Mono,Menlo,Monaco,Courier New,monospace;font-size:.875rem;line-height:1.6}.md :not(pre)>code{font-family:ui-monospace,SF Mono,Menlo,Monaco,Courier New,monospace;background:#090909;padding:.2em .4em;border-radius:4px;font-size:.9em;border:1px solid oklch(28% 0 0)}.md h2,.md h3{margin-top:2.5rem;margin-bottom:1rem}.md p{margin:1rem 0}.md blockquote{border-left:3px solid oklch(28% 0 0);margin:1.5rem 0;padding:.5rem 1rem;background:#090909;border-radius:0 8px 8px 0}.md blockquote p{margin:.5rem 0;color:#8f8f8f}.md ul,.md ol{padding-left:1.5rem;margin:1rem 0}.md li{margin:.5rem 0}.md hr{border:none;border-top:1px solid oklch(28% 0 0);margin:2rem 0}.md img{max-width:100%;height:auto;display:block;margin:1.5rem 0}.md pre span[style*="color:#6A737D"],.md pre span[style*="color:#8b949e"]{color:#54b05a!important;font-style:italic}.tags:where(.astro-hfj6urh3){list-style:none;padding:0;margin:1rem 0;display:flex;flex-wrap:wrap;gap:.5rem}li:where(.astro-hfj6urh3) .tag-link{background:#121212;border:1px solid oklch(28% 0 0);border-radius:4px;padding:.2rem .6rem;margin:0;font-size:.8rem;color:#9e9e9e;text-decoration:none;transition:all .15s ease;display:inline-block}li:where(.astro-hfj6urh3) .tag-link:hover{background:#222;border-color:var(--accent);color:var(--accent);transform:none}
@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0;mix-blend-mode:plus-lighter}to{opacity:1;mix-blend-mode:plus-lighter}}@keyframes astroFadeOut{0%{opacity:1;mix-blend-mode:plus-lighter}to{opacity:0;mix-blend-mode:plus-lighter}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style><style>[data-astro-transition-scope="astro-dsji2kxr-1"] { view-transition-name: title-2022-07-04-generate-html-pages-from-markdown-with-deno; }@layer astro { ::view-transition-old(title-2022-07-04-generate-html-pages-from-markdown-with-deno) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(title-2022-07-04-generate-html-pages-from-markdown-with-deno) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(title-2022-07-04-generate-html-pages-from-markdown-with-deno) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(title-2022-07-04-generate-html-pages-from-markdown-with-deno) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-dsji2kxr-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-dsji2kxr-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-dsji2kxr-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-dsji2kxr-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-dsji2kxr-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-dsji2kxr-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-dsji2kxr-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-dsji2kxr-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-vpr6a7he-2"] { view-transition-name: tag-typescript; }@layer astro { ::view-transition-old(tag-typescript) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(tag-typescript) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(tag-typescript) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(tag-typescript) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-vpr6a7he-2"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-vpr6a7he-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-vpr6a7he-2"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-vpr6a7he-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-vpr6a7he-2"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-vpr6a7he-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-vpr6a7he-2"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-vpr6a7he-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-vpr6a7he-3"] { view-transition-name: tag-react; }@layer astro { ::view-transition-old(tag-react) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(tag-react) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(tag-react) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(tag-react) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-vpr6a7he-3"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-vpr6a7he-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-vpr6a7he-3"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-vpr6a7he-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-vpr6a7he-3"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-vpr6a7he-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-vpr6a7he-3"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-vpr6a7he-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head>
  <body>
    
  <header class="astro-np5jgbit">
  <a href="/es/" class="site-title astro-np5jgbit"><span class="a-matias-quezada astro-np5jgbit astro-2dpizvyk">
  <abbr class="astro-2dpizvyk">Adrian</abbr>
  <span class="dot astro-2dpizvyk">.</span>
  <span class="astro-2dpizvyk">Mat√≠as Quezada</span>
</span></a>
  <nav class="astro-np5jgbit">
    <a href="/es/projects/" class="astro-np5jgbit">Projects</a>
    <a href="/es/blog/" class="astro-np5jgbit">Blog</a>
    <a href="/es/experiments/" class="astro-np5jgbit">Experiments</a>
    <a href="/es/talks/" class="astro-np5jgbit">Talks</a>
    <a href="/es/career/" class="astro-np5jgbit">Career</a>
  </nav>
  <div class="nav-icons astro-np5jgbit">
    <a href="https://github.com/amatiasq" title="GitHub" class="icon-link astro-np5jgbit">
      <svg aria-label="GitHub" width="20" height="20" viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg" class="astro-np5jgbit">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="currentColor" class="astro-np5jgbit"></path>
      </svg>
    </a>
    <a href="/en/blog/2022-07-04-generate-html-pages-from-markdown-with-deno/" title="English" class="lang-switch astro-bzi5jpwk" data-lang="en">
  üá¨üáß
</a>



<script type="module">function n(){const t=document.querySelector(".lang-switch");if(!t)return;const a=t.dataset.lang,e=Intl.DateTimeFormat().resolvedOptions().timeZone.startsWith("America/");a==="en"?(t.textContent=e?"üá∫üá∏":"üá¨üáß",t.title="English"):(t.textContent=e?"üá¶üá∑":"üá™üá∏",t.title="Espa√±ol")}n();document.addEventListener("astro:after-swap",n);</script>
  </div>
</header>
<hr class="astro-np5jgbit">
  <main>
    <article>
      <header>
        <h1 data-astro-transition-scope="astro-dsji2kxr-1">Generar p√°ginas HTML desde TSX con Deno</h1>
        <time datetime="2022-07-04T00:00:00.000Z" class="astro-zcsldidg">04 jul 2022</time>
        <ul class="tags astro-hfj6urh3">
    <li class="astro-hfj6urh3">
        <a href="/es/tag/typescript/" class="tag-link astro-hfj6urh3">
          <span class="astro-hfj6urh3" data-astro-transition-scope="astro-vpr6a7he-2">
            Typescript
          </span>
        </a>
      </li><li class="astro-hfj6urh3">
        <a href="/es/tag/react/" class="tag-link astro-hfj6urh3">
          <span class="astro-hfj6urh3" data-astro-transition-scope="astro-vpr6a7he-3">
            React
          </span>
        </a>
      </li>
  </ul>


      </header>
      <div class="md "><p>He estado trabajando en una versi√≥n nueva de este sitio con una idea clara:</p>
<ul>
<li>Quiero escribir el contenido en Markdown</li>
<li>Quiero que sea el sitio m√°s r√°pido que ha habido (negociable)</li>
<li>Biling√ºe (N-ling√ºe de hecho)</li>
</ul>
<p>Despu√©s de unos meses de trabajo me encontr√© tomando la misma presunci√≥n no escrita que recientemente coment√© a mi amiga @Shakira, qui√©n me ayud√≥ con este hermoso dise√±o üôå</p>
<blockquote>
<p>Voy a animar la cabecera de alguna forma s√≥lo con CSS, no hay lugar para Javascript en el sitio del tipo del Javascript. Ese es el mensaje ü§£</p>
</blockquote>
<p>Eso es todo.</p>
<p>El post puede terminar aqu√≠.</p>
<p>Pero tengo m√°s que escribir:</p>
<p>Eso significa...</p>
<ul>
<li>P√°ginas con HTML / CSS plano</li>
<li>CSS / JS embebido directamente en el HTML</li>
<li>solo el CSS / JS necesario se incluye</li>
</ul>
<p>Y... necesito probar <a href="https://deno.land/">Deno</a>, parece genial, suena genial y sabes que encontrar√°s problemas cuando empieces a usarlo pero cu√°les podr√°n ser?</p>
<p>Aqu√≠ est√° el camino para generar p√°ginas HTML desde TSX con Deno:</p>
<ul>
<li>Tienes <a href="https://deno.land/#installation">Deno</a> instalado</li>
<li>Crea un archivo <code>.tsx</code></li>
<li>importar <code>React</code> de <code>https://esm.sh/react</code></li>
<li>importar <code>{ renderToStaticMarkup }</code> de <code>https://esm.sh/react-dom/server</code>;</li>
<li>esto:</li>
</ul>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// Las versiones se incluyen por importantes razones! ü•≤</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> React </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'https://esm.sh/react@18.2.0'</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { renderToStaticMarkup } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'https://esm.sh/react-dom@18.2.0/server'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Este es nuestro √∫nico componente</span></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> MyComponent</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> &#x3C;</span><span style="color:#B392F0">p</span><span style="color:#E1E4E8">>√âsta es mi p√°gina</span><span style="color:#F97583">!&#x3C;</span><span style="color:#E1E4E8">p</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// renderToStaticMarkup hace la magia</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> html</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> renderToStaticMarkup</span><span style="color:#E1E4E8">(&#x3C;</span><span style="color:#B392F0">MyComponent</span><span style="color:#E1E4E8"> />);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// enviar el HTML resultante a la salida del programa</span></span>
<span class="line"><span style="color:#E1E4E8">console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(html);</span></span></code></pre></div><p>&quot;Pero Mat√≠as! quiero que esto se pueda leer de / escribir a disco! no desde el mismo c√≥digo!&quot;</p>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// main.tsx</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> React </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'https://esm.sh/react@18.2.0'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { renderToStaticMarkup } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'https://esm.sh/react-dom@18.2.0/server'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// leemos los argumentos</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">input</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">output</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Deno.args;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// input/output pueden ser relativos al directorio de trabajo del usuario</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> cwd</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> `file://${</span><span style="color:#E1E4E8">Deno</span><span style="color:#9ECBFF">.</span><span style="color:#B392F0">cwd</span><span style="color:#9ECBFF">()</span><span style="color:#9ECBFF">}/`</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> input_fullpath</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> URL</span><span style="color:#E1E4E8">(input, cwd).pathname;</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> output_fullpath</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> URL</span><span style="color:#E1E4E8">(output, cwd).pathname;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Importar el archivo .tsx que contiene la p√°gina</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> inputModule</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> import</span><span style="color:#E1E4E8">(input_fullpath);</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> Page</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> inputModule.default;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> html</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> renderToStaticMarkup</span><span style="color:#E1E4E8">(&#x3C;</span><span style="color:#B392F0">Page</span><span style="color:#B392F0"> randomProp</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"yay"</span><span style="color:#E1E4E8"> />);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Escribimos el HTML generado a disco</span></span>
<span class="line"><span style="color:#F97583">await</span><span style="color:#E1E4E8"> Deno.</span><span style="color:#B392F0">writeTextFile</span><span style="color:#E1E4E8">(output_fullpath, html);</span></span></code></pre></div><div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// MyPage.tsx</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> React </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'https://esm.sh/react@18.2.0'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> &#x3C;</span><span style="color:#B392F0">p</span><span style="color:#E1E4E8">>√âsta es mi p√°gina</span><span style="color:#F97583">!&#x3C;</span><span style="color:#E1E4E8">p</span><span style="color:#F97583">></span></span></code></pre></div><div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#B392F0">deno</span><span style="color:#9ECBFF"> run</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#79B8FF">  --allow-read=.</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#79B8FF">  --allow-write=.</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#79B8FF">  --allow-net=https://esm.sh</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#9ECBFF">  ./main.tsx</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#9ECBFF">  ./MyPage.tsx</span><span style="color:#9ECBFF"> ./MyPage.html</span></span></code></pre></div><p>Permisos explicados:</p>
<ul>
<li><code>--allow-read=.</code> Deno permite que el script lea la carpeta en la que estamos: <code>.</code></li>
<li><code>--allow-write=.</code> lo mismo que arriba, solo se necesita acceso a <code>input</code>/<code>output</code> pero <code>.</code> es suficiente la mayor√≠a de las veces</li>
<li><code>--allow-net=https://esm.sh</code> requiere acceso a esm.sh para descargar las dependencias: <code>react</code> and <code>react-dom</code></li>
<li><code>./main.tsx</code> esto no es un permiso, es el nombre del archivo que creamos all√° arriba!</li>
<li><code>./MyPage.tsx ./MyPage.html</code> estos son los argumentos que se pasar√°n como <code>input</code> y <code>ouput</code>, es que no estabas prestando atenci√≥n!?</li>
</ul>
<p>Ok pero podemos hacerlo mejor, no queremos pasar archivo por archivo, queremos darle una carpeta y que genere la misma estructura, si tan solo tuvieramos un...</p>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// Leer archivos recursivamente</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> async</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> getFilesRecursively</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">currentPath</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> names</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">[] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  for</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">const</span><span style="color:#79B8FF"> dirEntry</span><span style="color:#F97583"> of</span><span style="color:#E1E4E8"> Deno.</span><span style="color:#B392F0">readDir</span><span style="color:#E1E4E8">(currentPath)) {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> entryPath</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> `${</span><span style="color:#E1E4E8">root</span><span style="color:#9ECBFF">}/${</span><span style="color:#E1E4E8">dirEntry</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">name</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> (dirEntry.isDirectory) {</span></span>
<span class="line"><span style="color:#E1E4E8">      names.</span><span style="color:#B392F0">push</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">...</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">await</span><span style="color:#B392F0"> getFilesRecursively</span><span style="color:#E1E4E8">(entryPath)).</span><span style="color:#B392F0">sort</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">    } </span><span style="color:#F97583">else</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">      names.</span><span style="color:#B392F0">push</span><span style="color:#E1E4E8">(entryPath);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> names;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre></div><p>Estoy seguro que algo as√≠ es parte de <code>esm.sh/std</code> por alg√∫n lado...</p>
<p>Ahora vamos a actualizar el <code>main.tsx</code> que creamos arriba:</p>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// main.tsx</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> React </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'https://esm.sh/react@18.2.0'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { renderToStaticMarkup } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'https://esm.sh/react-dom@18.2.0/server'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// Importamos una funci√≥n para obtener el nombre del directorio de un archivo</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { dirname } </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'https://deno.land/std@0.143.0/path/mod.ts'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">input</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">output</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Deno.args;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// funci√≥n auxiliar, hay algo en deno.land/std como esto?</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> relativeToCwd</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">target</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span></span>
<span class="line"><span style="color:#F97583">  new</span><span style="color:#B392F0"> URL</span><span style="color:#E1E4E8">(target, </span><span style="color:#9ECBFF">`file://${</span><span style="color:#E1E4E8">Deno</span><span style="color:#9ECBFF">.</span><span style="color:#B392F0">cwd</span><span style="color:#9ECBFF">()</span><span style="color:#9ECBFF">}/`</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> input_dir</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> relativeToCwd</span><span style="color:#E1E4E8">(input);</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> output_dir</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> relativeToCwd</span><span style="color:#E1E4E8">(output);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">for</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">const</span><span style="color:#79B8FF"> file</span><span style="color:#F97583"> of</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> getFilesRecursively</span><span style="color:#E1E4E8">(input_dir)) {</span></span>
<span class="line"><span style="color:#6A737D">  // Importar el archivo .tsx que contiene la p√°gina</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> inputModule</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#B392F0"> import</span><span style="color:#E1E4E8">(file);</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> Page</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> inputModule.default;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> html</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> renderToStaticMarkup</span><span style="color:#E1E4E8">(&#x3C;</span><span style="color:#B392F0">Page</span><span style="color:#B392F0"> randomProp</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"yay"</span><span style="color:#E1E4E8"> />);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // ./input/mydir/myfile.tsx</span></span>
<span class="line"><span style="color:#6A737D">  // se convierte en</span></span>
<span class="line"><span style="color:#6A737D">  // ./output/mydir/myfile.html</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> destination</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> file</span></span>
<span class="line"><span style="color:#E1E4E8">    .</span><span style="color:#B392F0">replace</span><span style="color:#E1E4E8">(input_dir, output_dir)</span></span>
<span class="line"><span style="color:#E1E4E8">    .</span><span style="color:#B392F0">replace</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">/</span><span style="color:#79B8FF">.</span><span style="color:#DBEDFF">tsx</span><span style="color:#F97583">$</span><span style="color:#9ECBFF">/</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">'.html'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // Esto crea todas las carpetas necesarias</span></span>
<span class="line"><span style="color:#6A737D">  // Adem√°s si la carpeta ya existe no lanza error :)</span></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#E1E4E8"> Deno.</span><span style="color:#B392F0">mkdir</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">dirname</span><span style="color:#E1E4E8">(destination), { recursive: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  // Escribir el HTML generado a disco</span></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#E1E4E8"> Deno.</span><span style="color:#B392F0">writeTextFile</span><span style="color:#E1E4E8">(destination, html);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre></div><p>A veces encontr√°s necesario borrar la carpeta de salida antes de empezar a escribir en ella... hice esto que no es hermoso pero hace el trabajo ü§∑‚Äç‚ôÄÔ∏è</p>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#F97583">try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  // Esta funci√≥n tira un error incluso con `{ recursive: true }` lo cu√°l tiene sentido</span></span>
<span class="line"><span style="color:#F97583">  await</span><span style="color:#E1E4E8"> Deno.</span><span style="color:#B392F0">remove</span><span style="color:#E1E4E8">(output, { recursive: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8"> });</span></span>
<span class="line"><span style="color:#E1E4E8">} </span><span style="color:#F97583">catch</span><span style="color:#E1E4E8"> {}</span></span></code></pre></div><p>A partir de aqu√≠ puedes empezar a crear tu sitio con JS sabiendo que nada de JS se ejecutar√° en el navegador</p>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#6A737D">// input/index.tsx</span></span>
<span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> React </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'https://esm.sh/react@18.2.0'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// CSS puesto en una variable porque las llaves { } confundir√≠an al JSX de React</span></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> styles</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> `</span></span>
<span class="line"><span style="color:#9ECBFF">  .body { margin: 0 }</span></span>
<span class="line"><span style="color:#9ECBFF">`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#F97583">  &#x3C;</span><span style="color:#E1E4E8">html lang</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"en"</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#B392F0">head</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#F97583">      &#x3C;</span><span style="color:#E1E4E8">meta charSet</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"UTF-8"</span><span style="color:#F97583"> /></span></span>
<span class="line"><span style="color:#F97583">      &#x3C;</span><span style="color:#E1E4E8">meta http</span><span style="color:#F97583">-</span><span style="color:#E1E4E8">equiv</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"X-UA-Compatible"</span><span style="color:#E1E4E8"> content</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"IE=edge"</span><span style="color:#F97583"> /></span></span>
<span class="line"><span style="color:#F97583">      &#x3C;</span><span style="color:#E1E4E8">meta name</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"viewport"</span><span style="color:#E1E4E8"> content</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"width=device-width, initial-scale=1.0"</span><span style="color:#F97583"> /></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#B392F0">title</span><span style="color:#E1E4E8">>Mi sitio web</span><span style="color:#F97583">!&#x3C;/</span><span style="color:#E1E4E8">title</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#B392F0">style</span><span style="color:#E1E4E8">>{styles}</span><span style="color:#F97583">&#x3C;/</span><span style="color:#E1E4E8">style</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">    &#x3C;/</span><span style="color:#E1E4E8">head</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#B392F0">body</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#B392F0">p</span><span style="color:#E1E4E8">>Este es mi √≠ndice</span><span style="color:#F97583">!&#x3C;</span><span style="color:#E1E4E8">p</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">    &#x3C;/</span><span style="color:#E1E4E8">body</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#F97583">  &#x3C;/</span><span style="color:#E1E4E8">html</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#E1E4E8">)</span></span></code></pre></div><div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#B392F0">deno</span><span style="color:#9ECBFF"> run</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#79B8FF">  --allow-read=.</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#79B8FF">  --allow-write=.</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#79B8FF">  --allow-net=https://esm.sh</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#9ECBFF">  ./main.tsx</span><span style="color:#79B8FF"> \</span></span>
<span class="line"><span style="color:#9ECBFF">  ./input</span><span style="color:#9ECBFF"> ./output</span></span></code></pre></div><p>Y generar√≠a un archivo como este:</p>
<div class="code-block"><pre class="shiki github-dark" style="background-color:#24292e;color:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">html</span><span style="color:#B392F0"> lang</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"en"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">head</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">meta</span><span style="color:#B392F0"> charset</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"UTF-8"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">meta</span><span style="color:#B392F0"> http-equiv</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"X-UA-Compatible"</span><span style="color:#B392F0"> content</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"IE=edge"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">meta</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"viewport"</span><span style="color:#B392F0"> content</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"width=device-width, initial-scale=1.0"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">title</span><span style="color:#E1E4E8">>Mi sitio web!&#x3C;/</span><span style="color:#85E89D">title</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">style</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#B392F0">      .body</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">        margin</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">style</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">head</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">body</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">>Este es mi √≠ndice!&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">body</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">html</span><span style="color:#E1E4E8">></span></span></code></pre></div><p>&quot;Pero Mat√≠as, has dado tantas vueltas para tener una forma ligeramente m√°s compleja de escribir HTML?&quot;</p>
<p>Si, exacto, gracias por darte cuenta. Ahora tenemos componentes y podemos crear componentes como la mirda y ya que importamos los archivos con <code>import()</code> todas las dependencias ser√°n manejadas apropiadamente por Deno! No solo eso, un entorno Javascript signifca que podemos hacer todo tipo de l√≥gica como procesado de Markdown antes de generar la p√°gina pero eso es otra historia.</p>
<p>Otras cosas que aprend√≠ sobre la marcha y me encantar√≠a escribir al respecto:</p>
<ul>
<li>Import maps (con o sin barra? AMBOS! y con versi√≥n completa!)<ul>
<li><code>/deps/some-dependency.ts</code> porqu√© a√∫n lo encuentro √∫til</li>
<li>El infierno del archivo <code>lock.json</code> de Deno (y porqu√© existe)</li>
</ul>
</li>
</ul>
</div>
    </article>
  </main>

  </body></html>