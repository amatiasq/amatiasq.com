---
import { Markdown } from 'astro/components';
import HtmlLayout from '../layouts/HtmlLayout.astro';
import Container from '../components/atoms/Container.astro';
import Translate from '../components/atoms/Translate.tsx';
import Header from '../components/molecules/Header.astro';

import { DEFAULT_LANGUAGE, PAGE_TITLE } from '../constants.ts';
import { cleanAndSort } from '../util/article.ts';

export async function createCollection() {
  const posts = cleanAndSort(Astro.fetchContent('../data/blog/*.md'), '/blog');

  return {
    route: '/blog/:year/:month/:day/:slug',
    paths: () => posts.map(post => ({ params: post.urlParams })),
    props: (x) => ({ post: posts.find(p => p.urlParams.slug === x.params.slug) }),
  };
}

const { $scope, post, lang = DEFAULT_LANGUAGE } = Astro.props

const content = '# test'
---

<Markdown content={content}/>
