---
import { MISSING_TRANSLATION, useTranslations } from '../../i18n';

const { lang, tr } = useTranslations(Astro.url);
const hasSlot = Astro.slots.has(lang);
const value = await tr(Astro.props.value ?? Astro.props);

if (!hasSlot && value === MISSING_TRANSLATION) {
  throw new Error(`Missing translation for "${JSON.stringify(Astro.props)}"`);
}
---

{
  !hasSlot ? (
    value
  ) : lang === 'en' ? (
    <slot name="en" />
  ) : lang === 'es' ? (
    <slot name="es" />
  ) : (
    MISSING_TRANSLATION
  )
}
